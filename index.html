
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>范琪的个人博客</title>
  <meta name="author" content="范琪">

  
  <meta name="description" content="重置oracle 11g中sys用户的密码的步骤如下： 1. 登录oracle服务器，并启动命令提示符窗口
2. 输入'sqlplus / as sysdba'，通过服务器认证连接oracle
3. 输入修改密码的指令'alter user sys identified by password'， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.fanqi.xyz/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="范琪的个人博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">范琪的个人博客</a></h1>
  
    <h2>临渊羡鱼 不如退而结网</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="www.fanqi.xyz">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">归档</a></li>
  <li><a href="/about">关于</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/26/modify-the-system-users-password-in-oracle-11g/">重置oracle 11g中sys用户的密码</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-26T12:41:48+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>12:41 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>重置oracle 11g中sys用户的密码的步骤如下： <br/>
1. 登录oracle服务器，并启动命令提示符窗口<br/>
2. 输入'sqlplus / as sysdba'，通过服务器认证连接oracle<br/>
3. 输入修改密码的指令'alter user sys identified by password'，其中password为修改后的密码。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Microsoft Windows [版本 6.1.7601]
</span><span class='line'>版权所有 (c) 2009 Microsoft Corporation。保留所有权利。
</span><span class='line'>
</span><span class='line'>C:\Users\Administrator&gt;sqlplus / as sysdba;
</span><span class='line'>
</span><span class='line'>SQL*Plus: Release 11.2.0.1.0 Production on 星期四 5月 26 12:55:36 2016
</span><span class='line'>
</span><span class='line'>Copyright (c) 1982, 2010, Oracle.  All rights reserved.
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>连接到:
</span><span class='line'>Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
</span><span class='line'>With the Partitioning, OLAP, Data Mining and Real Application Testing options
</span><span class='line'>
</span><span class='line'>SQL&gt; alter user sys identified by orcl;
</span><span class='line'>
</span><span class='line'>用户已更改。
</span><span class='line'>
</span><span class='line'>SQL&gt; exit
</span><span class='line'>从 Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
</span><span class='line'>With the Partitioning, OLAP, Data Mining and Real Application Testing options 断
</span><span class='line'>开</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/26/eclipse-tips/">Eclipse技巧</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-26T09:27:04+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:27 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>批量覆盖父类方法</h2>

<ul>
<li>菜单选项：Source > Override/Implement Methods</li>
<li>mac快捷键：option+command+s</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/25/liferay-internationalization/">Liferay 国际化</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-25T11:13:57+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:13 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>概述</h2>

<p>Liferay默认支持国际化，也提供了一套完成的国际化方法。</p>

<h2>给portlet添加国际化支持</h2>

<p>在portlet.xml中，找到需要国际化的portlet，在<code>portlet-info</code>子节点前面，增加以下配置：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;resource-bundle&gt;</span>content.Language<span class="nt">&lt;/resource-bundle&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>创建国际化资源文件</h2>

<p>在当前插件工程的
创建一个默认的Language.properties
创建一个中国的国际化资源文件Language_zh_CN.properties，其中zh_CN代表的就是中国。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/25/liferay-portlet-lifecycle/">Liferay Portlet 生命周期</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-25T09:02:46+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:02 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>概述</h2>

<p>了解portlet的生命周期，对于liferay portlet开发者来说是一个基本的要求。
portlet的生命周期分为六个阶段：<br/>
1. init
1. render
1. processAction
1. processEvent
1. serveResource
1. destroy</p>

<h2>示例代码</h2>

<p>view.jsp</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%&gt;
</span><span class='line'>
</span><span class='line'>&lt;portlet:defineObjects /&gt;
</span><span class='line'>
</span><span class='line'>This is the
</span><span class='line'>&lt;b&gt;Lifecycle&lt;/b&gt;
</span><span class='line'>portlet in View mode.
</span><span class='line'>&lt;br&gt;
</span><span class='line'>
</span><span class='line'>&lt;portlet:renderURL var="viewURL" /&gt;
</span><span class='line'>&lt;a href="&lt;%=viewURL%&gt;"&gt;viewURL&lt;/a&gt;
</span><span class='line'>&lt;br&gt;
</span><span class='line'>&lt;portlet:actionURL var="actionURL" name="doAction"&gt;&lt;/portlet:actionURL&gt;
</span><span class='line'>&lt;a href="&lt;%=actionURL%&gt;"&gt;actionURL&lt;/a&gt;
</span><span class='line'>&lt;br&gt;
</span><span class='line'>&lt;portlet:resourceURL var="resourceURL" /&gt;
</span><span class='line'>&lt;a href="&lt;%=resourceURL%&gt;"&gt;resourceURL&lt;/a&gt;
</span><span class='line'>&lt;br&gt;</span></code></pre></td></tr></table></div></figure>


<p>LifecyclePortlet.java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LifecyclePortlet</span> <span class="kd">extends</span> <span class="n">MVCPortlet</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">PortletException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase (MVCPortlet) : init&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">init</span><span class="o">();</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="n">PortletConfig</span> <span class="n">config</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">PortletException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase (GenericPortlet) : init&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">config</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">render</span><span class="o">(</span><span class="n">RenderRequest</span> <span class="n">arg0</span><span class="o">,</span> <span class="n">RenderResponse</span> <span class="n">arg1</span><span class="o">)</span>
</span><span class='line'>          <span class="kd">throws</span> <span class="n">PortletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase: render&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">arg0</span><span class="o">,</span> <span class="n">arg1</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processAction</span><span class="o">(</span><span class="n">ActionRequest</span> <span class="n">actionRequest</span><span class="o">,</span>
</span><span class='line'>          <span class="n">ActionResponse</span> <span class="n">actionResponse</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">PortletException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase: processAction&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">processAction</span><span class="o">(</span><span class="n">actionRequest</span><span class="o">,</span> <span class="n">actionResponse</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doAction</span><span class="o">(</span><span class="n">ActionRequest</span> <span class="n">actionRequest</span><span class="o">,</span>
</span><span class='line'>          <span class="n">ActionResponse</span> <span class="n">actionResponse</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">PortletException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;LifecyclePortlet: doAction&quot;</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processEvent</span><span class="o">(</span><span class="n">EventRequest</span> <span class="n">arg0</span><span class="o">,</span> <span class="n">EventResponse</span> <span class="n">arg1</span><span class="o">)</span>
</span><span class='line'>          <span class="kd">throws</span> <span class="n">PortletException</span><span class="o">,</span> <span class="n">IOException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase: processEvent&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">processEvent</span><span class="o">(</span><span class="n">arg0</span><span class="o">,</span> <span class="n">arg1</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serveResource</span><span class="o">(</span><span class="n">ResourceRequest</span> <span class="n">resourceRequest</span><span class="o">,</span>
</span><span class='line'>          <span class="n">ResourceResponse</span> <span class="n">resourceResponse</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span>
</span><span class='line'>          <span class="n">PortletException</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase: serveResource&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="n">resourceResponse</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">&quot;text/html;charset=UTF-8&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="n">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">out</span> <span class="o">=</span> <span class="n">resourceResponse</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&quot;serveResource&quot;</span><span class="o">;</span>
</span><span class='line'>      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
</span><span class='line'>      <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
</span><span class='line'>      <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">serveResource</span><span class="o">(</span><span class="n">resourceRequest</span><span class="o">,</span> <span class="n">resourceResponse</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nd">@Override</span>
</span><span class='line'>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Lifecycle Phase (GenericPortlet) : destroy&quot;</span><span class="o">);</span>
</span><span class='line'>      <span class="kd">super</span><span class="o">.</span><span class="na">destroy</span><span class="o">();</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>init</h2>

<p>一个portlet在portlet容器中被部署及实例化的时候，就会调用init方法，该方法在portlet生命周期中仅仅只会被调用一次。<br/>
init阶段对应init()和init(PortletConfig config)两个实现方法，这两个方法分别定义在MVCPortlet和GenericPortlet，而GenericPortlet是MVCPortlet的父类，因此init(PortletConfig config)方法先执行。<br/>
init执行如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="mi">00</span><span class="o">:</span><span class="mi">58</span><span class="o">:</span><span class="mi">09</span><span class="o">,</span><span class="mi">934</span> <span class="n">INFO</span>  <span class="o">[</span><span class="n">localhost</span><span class="o">-</span><span class="n">startStop</span><span class="o">-</span><span class="mi">7</span><span class="o">][</span><span class="nl">PortletHotDeployListener:</span><span class="mi">344</span><span class="o">]</span> <span class="n">Registering</span> <span class="n">portlets</span> <span class="k">for</span> <span class="n">lportal</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="mf">6.2</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="n">lifecycle</span><span class="o">-</span><span class="n">portlet</span>
</span><span class='line'><span class="n">Lifecycle</span> <span class="nf">Phase</span> <span class="o">(</span><span class="n">GenericPortlet</span><span class="o">)</span> <span class="o">:</span> <span class="n">init</span>
</span><span class='line'><span class="n">Lifecycle</span> <span class="nf">Phase</span> <span class="o">(</span><span class="n">MVCPortlet</span><span class="o">)</span> <span class="o">:</span> <span class="n">init</span>
</span><span class='line'><span class="mi">00</span><span class="o">:</span><span class="mi">58</span><span class="o">:</span><span class="mi">09</span><span class="o">,</span><span class="mi">964</span> <span class="n">INFO</span>  <span class="o">[</span><span class="n">localhost</span><span class="o">-</span><span class="n">startStop</span><span class="o">-</span><span class="mi">7</span><span class="o">][</span><span class="nl">PortletHotDeployListener:</span><span class="mi">492</span><span class="o">]</span> <span class="mi">1</span> <span class="n">portlet</span> <span class="k">for</span> <span class="n">lportal</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="mf">6.2</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="n">lifecycle</span><span class="o">-</span><span class="n">portlet</span> <span class="n">is</span> <span class="n">available</span> <span class="k">for</span> <span class="n">use</span>
</span></code></pre></td></tr></table></div></figure>


<h2>render</h2>

<p>在portal页面中显示portlet的内容，就会调用render方法。<br/>
render方法就是负责生成portlethtml内容。<br/>
也可以通过renderURL来调用render方法加载不同的网页内容。
在portlet的生命周期中，render方法应该是被调用次数最多的。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Lifecycle</span> <span class="nf">Phase</span> <span class="o">(</span><span class="n">GenericPortle</span><span class="o">)</span> <span class="o">:</span> <span class="n">render</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. processAction</h2>

<p>当有任何action执行的时候，processAction都被先调用。
例如通过actionURL向后台action方法提交表单数据，就会先触发processAction。
在portlet的生命周期中，processAction方法能够被多次调用。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Lifecycle</span> <span class="nf">Phase</span> <span class="o">(</span><span class="n">MVCPortlet</span><span class="o">)</span> <span class="o">:</span> <span class="n">processAction</span>
</span><span class='line'><span class="nl">LifecyclePortlet:</span> <span class="n">doAction</span>
</span></code></pre></td></tr></table></div></figure>


<h2>processEvent</h2>

<p>当任何时间被触发的时候，就会调用processEvent方法。</p>

<h2>serveResource</h2>

<p>通过serveResource方法，能够获取portlet提供的服务端资源，包括html、json、xml等。<br/>
在jsp中我们能够通过请求resourceURL，来调用serveResource方法。<br/>
ajax也能够和resourceURL结合使用。<br/>
在portlet的生命周期中，serveResource能够被多次调用。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Lifecycle</span> <span class="nf">Phase</span> <span class="o">(</span><span class="n">MVCPortlet</span><span class="o">)</span> <span class="o">:</span> <span class="n">serveResource</span>
</span></code></pre></td></tr></table></div></figure>


<h2>destroy</h2>

<p>当卸载一个portlet的时候，就会调用它的destroy方法。
在portlet的生命周期中，destroy方法只会被执行一次。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="mi">01</span><span class="o">:</span><span class="mi">35</span><span class="o">:</span><span class="mi">10</span><span class="o">,</span><span class="mi">248</span> <span class="n">INFO</span>  <span class="o">[</span><span class="n">ContainerBackgroundProcessor</span><span class="o">[</span><span class="n">StandardEngine</span><span class="o">[</span><span class="n">Catalina</span><span class="o">]]][</span><span class="nl">PortletHotDeployListener:</span><span class="mi">525</span><span class="o">]</span> <span class="n">Unregistering</span> <span class="n">portlets</span> <span class="k">for</span> <span class="n">lportal</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="mf">6.2</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="n">demo</span><span class="o">-</span><span class="n">portlet</span>
</span><span class='line'><span class="n">Lifecycle</span> <span class="nf">Phase</span> <span class="o">(</span><span class="n">GenericPortlet</span><span class="o">)</span> <span class="o">:</span> <span class="n">destroy</span>
</span><span class='line'><span class="mi">01</span><span class="o">:</span><span class="mi">35</span><span class="o">:</span><span class="mi">10</span><span class="o">,</span><span class="mi">250</span> <span class="n">INFO</span>  <span class="o">[</span><span class="n">ContainerBackgroundProcessor</span><span class="o">[</span><span class="n">StandardEngine</span><span class="o">[</span><span class="n">Catalina</span><span class="o">]]][</span><span class="nl">PortletHotDeployListener:</span><span class="mi">560</span><span class="o">]</span> <span class="mi">1</span> <span class="n">portlet</span> <span class="k">for</span> <span class="n">lportal</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="mf">6.2</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="n">lifecycle</span><span class="o">-</span><span class="n">portlet</span> <span class="n">was</span> <span class="n">unregistered</span>
</span></code></pre></td></tr></table></div></figure>


<h2>参考资源</h2>

<ol>
<li><a href="http://liferaytutorial.blogspot.com/2013/04/portlet-lifecycle.html">http://liferaytutorial.blogspot.com/2013/04/portlet-lifecycle.html</a></li>
<li><a href="http://www.opensource-techblog.com/2014/12/introduction-to-portlet-phases-and.html">http://www.opensource-techblog.com/2014/12/introduction-to-portlet-phases-and.html</a></li>
<li><a href="http://proliferay.com/jsr-286-portlet-life-cycle/">http://proliferay.com/jsr-286-portlet-life-cycle/</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/24/oracle-command/">Oracle常用运维命令</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-24T15:45:36+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:45 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>导出数据</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>exp orcl/orcl@orcl file=d:\orcl.dmp log=d:\orcl.log</span></code></pre></td></tr></table></div></figure>


<h2>导入数据</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>imp orcl/orcl@orcl  file=d:\orcl.dmp full=y</span></code></pre></td></tr></table></div></figure>


<h2>自动备份脚本（Windows Server版本）（待完善自动压缩）</h2>

<p>命名成后缀为.bat的脚本，双击即可执行备份，结合任务计划就能够实现每天自动备份。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rem if ""%1""=="""" goto end
</span><span class='line'>rem if ""%2""=="""" goto end
</span><span class='line'>
</span><span class='line'>set path=f:\db_bak_lqgt;%path%
</span><span class='line'>set now=%Date:~0,10%
</span><span class='line'>exp orcl/orcl@orcl file=f:\db_bak_orcl\orcl_%now%.dmp log=f:\db_bak_orcl\orcl_%now%.log buffer=1024000
</span><span class='line'>
</span><span class='line'>echo file in %1.dmp,%1.log
</span><span class='line'>rem pause
</span><span class='line'>
</span><span class='line'>for /f "skip=30" %%i in ('dir *.log /tc /o-d /b') do del %%i
</span><span class='line'>
</span><span class='line'>for /f "skip=30" %%i in ('dir *.dmp /tc /o-d /b') do del %%i
</span><span class='line'>
</span><span class='line'>exit
</span><span class='line'>
</span><span class='line'>:end
</span><span class='line'>echo 参数必须指定
</span><span class='line'>pause</span></code></pre></td></tr></table></div></figure>


<h2>批量删除当前用户所有表</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='SQL'><span class='line'><span class="k">SELECT</span> <span class="s1">&#39;drop table &#39;</span><span class="o">||</span><span class="k">table_name</span><span class="o">||</span><span class="s1">&#39;;&#39;</span> <span class="k">FROM</span> <span class="n">USER_TABLES</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">TABLE_NAME</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>不登陆启动sqlplus</h2>

<p>sqlplus /nolog</p>

<h2>使用系统用户连接数据库（只能在服务器使用）</h2>

<p>conn /as sysdba;</p>

<h2>查看表空间使用情况</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='SQL'><span class='line'><span class="k">SELECT</span>
</span><span class='line'>  <span class="k">SUM</span><span class="p">(</span><span class="n">bytes</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>  <span class="ss">&quot;M free_space&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">tablespace_name</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">dba_free_space</span>
</span><span class='line'><span class="k">GROUP</span> <span class="k">BY</span> <span class="n">tablespace_name</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">SELECT</span>
</span><span class='line'>  <span class="n">a</span><span class="p">.</span><span class="n">tablespace_name</span><span class="p">,</span>
</span><span class='line'>  <span class="n">round</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">bytes</span>  <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>  <span class="ss">&quot;M TOTAL&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">round</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="n">bytes</span>  <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>  <span class="ss">&quot;M USED&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">round</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">bytes</span>  <span class="o">/</span> <span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span>  <span class="ss">&quot;M FREE&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">round</span><span class="p">((</span><span class="n">b</span><span class="p">.</span><span class="n">bytes</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="n">a</span><span class="p">.</span><span class="n">bytes</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="ss">&quot;% USED&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">round</span><span class="p">((</span><span class="k">c</span><span class="p">.</span><span class="n">bytes</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="n">a</span><span class="p">.</span><span class="n">bytes</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="ss">&quot;% FREE&quot;</span>
</span><span class='line'><span class="k">FROM</span> <span class="n">sys</span><span class="p">.</span><span class="n">sm</span><span class="err">$</span><span class="n">ts_avail</span> <span class="n">a</span><span class="p">,</span> <span class="n">sys</span><span class="p">.</span><span class="n">sm</span><span class="err">$</span><span class="n">ts_used</span> <span class="n">b</span><span class="p">,</span> <span class="n">sys</span><span class="p">.</span><span class="n">sm</span><span class="err">$</span><span class="n">ts_free</span> <span class="k">c</span>
</span><span class='line'><span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">tablespace_name</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">tablespace_name</span>
</span><span class='line'>      <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">tablespace_name</span> <span class="o">=</span> <span class="k">c</span><span class="p">.</span><span class="n">tablespace_name</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>增加表空间数据文件（注意重新命名数据文件）</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='SQL'><span class='line'><span class="k">ALTER</span> <span class="n">TABLESPACE</span> <span class="k">SYSTEM</span>
</span><span class='line'><span class="k">ADD</span> <span class="n">DATAFILE</span> <span class="s1">&#39;D:\oradata\orcl\SYSTEM02.DBF&#39;</span>
</span><span class='line'><span class="k">SIZE</span> <span class="mi">512</span><span class="n">m</span>
</span><span class='line'><span class="n">AUTOEXTEND</span> <span class="k">ON</span>
</span><span class='line'><span class="k">NEXT</span> <span class="mi">512</span><span class="n">m</span>
</span><span class='line'><span class="n">MAXSIZE</span> <span class="mi">4096</span><span class="n">m</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/20/mysql-command/">MySQL常用命令</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-20T14:10:01+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>2:10 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>连接数据库</h1>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql -u root -p</span></code></pre></td></tr></table></div></figure>


<h2>查看帮助信息</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mysql&gt; help</span></code></pre></td></tr></table></div></figure>


<h2>MySQL 命令清单</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>?         (\?) Synonym for `help'.
</span><span class='line'>clear     (\c) Clear the current input statement.
</span><span class='line'>connect   (\r) Reconnect to the server. Optional arguments are db and host.
</span><span class='line'>delimiter (\d) Set statement delimiter.
</span><span class='line'>edit      (\e) Edit command with $EDITOR.
</span><span class='line'>ego       (\G) Send command to mysql server, display result vertically.
</span><span class='line'>exit      (\q) Exit mysql. Same as quit.
</span><span class='line'>go        (\g) Send command to mysql server.
</span><span class='line'>help      (\h) Display this help.
</span><span class='line'>nopager   (\n) Disable pager, print to stdout.
</span><span class='line'>notee     (\t) Don't write into outfile.
</span><span class='line'>pager     (\P) Set PAGER [to_pager]. Print the query results via PAGER.
</span><span class='line'>print     (\p) Print current command.
</span><span class='line'>prompt    (\R) Change your mysql prompt.
</span><span class='line'>quit      (\q) Quit mysql.
</span><span class='line'>rehash    (\#) Rebuild completion hash.
</span><span class='line'>source    (\.) Execute an SQL script file. Takes a file name as an argument.
</span><span class='line'>status    (\s) Get status information from the server.
</span><span class='line'>system    (\!) Execute a system shell command.
</span><span class='line'>tee       (\T) Set outfile [to_outfile]. Append everything into given outfile.
</span><span class='line'>use       (\u) Use another database. Takes database name as argument.
</span><span class='line'>charset   (\C) Switch to another charset. Might be needed for processing binlog with multi-byte charsets.
</span><span class='line'>warnings  (\W) Show warnings after every statement.
</span><span class='line'>nowarning (\w) Don't show warnings after every statement.
</span><span class='line'>resetconnection(\x) Clean session context.</span></code></pre></td></tr></table></div></figure>


<h2>展示数据库</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>show databases;</span></code></pre></td></tr></table></div></figure>


<h2>选择要使用的数据库</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>use databasename</span></code></pre></td></tr></table></div></figure>


<h2>展示数据表</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#
</span><span class='line'>show tables;
</span><span class='line'># 模糊查询
</span><span class='line'>show tables like '%user%';</span></code></pre></td></tr></table></div></figure>


<h2>查询表</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>select * from table;
</span><span class='line'># 格式化输出
</span><span class='line'>select * from table\g</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/19/create-a-local-svn-server-in-mac/">在Mac中搭建一个本地svn服务器</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-19T15:15:57+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:15 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>其实mac中本身就自带了svn服务端，所以创建一个本地的svn服务器就不叫容易。</p></blockquote>

<h2>创建svn服务器的目录，并进入该目录</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>svnadmin create /repositories/svnadmin/
</span><span class='line'>cd /repositories/svnadmin</span></code></pre></td></tr></table></div></figure>


<h1>#</h1>

<h2>启动svn server</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>svnserve -d -r /repositories/svnadmin</span></code></pre></td></tr></table></div></figure>


<h2>停止svn server</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>killall -9 svnserve</span></code></pre></td></tr></table></div></figure>


<h2>将server加入启动</h2>

<h2>参考资源</h2>

<ol>
<li><a href="http://blog.csdn.net/lys07962000/article/details/17917467">http://blog.csdn.net/lys07962000/article/details/17917467</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/19/editor-themes-for-developers/">程序猿专属主题</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-19T13:40:01+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>1:40 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我们程序猿日常工作会使用到大量的IDE以及编辑器，例如sublime、atom、idea、eclipse，如果拥有一套统一的赏心悦目的编辑主题，在一致的字体及样式下工作，无疑能够让我们更愉悦、更高效的工作。 <br/>
以下就是我收集的能够在多个应用中使用的主题，排名不分先后。 <br/>
1. <a href="https://github.com/chriskempson/tomorrow-theme">Tomorrow Theme</a><br/>
2. <a href="https://github.com/altercation/solarized">Solarized Theme</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/19/mac-shortcuts/">Mac快捷键</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-19T12:38:41+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>12:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>cmd+c：复制</p>

<p>cmd+v：粘贴</p>

<p>cmd+a：全选</p>

<p>cmd+delete：删除当前行。选中文件的时候直接删除文件。</p>

<p>shift+方向键：这个在选择文本的时候很有用，可以选择单个字符或者整行，多使用才能找到手感。</p>

<p>cmd+shift+左右方向键：这个可以快速选择当前行，用的也很多。</p>

<p>ctrl+a：跑到当前行的最前端，使用频次很高。</p>

<p>ctrl+e：跑到当前行的最尾端，使用频次很高。</p>

<p>cmd+tab：切换应用，这是大部分人用的最多的方式，却不是最高效的方式，后面会介绍其他方式。</p>

<p>cmd+`: 切换同一应用的窗口，这个非常实用。比如打开多个 xcode 工程的情况下，快速的在不同项目之间切换。 Finder，Firefox等场景下都支持。</p>

<p>cmd+w：关闭当前窗口，后面会介绍其他方式，同样高效。</p>

<p>cmd+q：关闭当前应用。</p>

<p>cmd+n：新建窗口，比如打开新的 Finder 窗口，配合 cmd+w 很实用。</p>

<p>cmd+t：新建 tab，支持 tab 模式的应用一般都支持这个快捷键。比如在safari，firefox，chrome下新建tab。</p>

<p>cmd+i: 显示当前文件的信息，查看文件大小，图片宽高的时候有用。</p>

<p>选中文件按空格预览：预览图片或者 pdf 文件时有用。配合方向键可以快速预览多张图片。</p>

<p>短按电源键：可以关闭屏幕，但不能太短，多按几次就有手感了。</p>

<h2>引用资源</h2>

<ol>
<li><a href="http://mp.weixin.qq.com/s?__biz=MTMwNDMwODQ0MQ==&amp;mid=2652840418&amp;idx=1&amp;sn=b4c4788f5b3f4380bac380a9ebb34bce&amp;scene=21#wechat_redirect">用 Mac 提升工作效率的 5 种方法</a></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/18/the-propagation-properties-in-the-spring/">Spring中的Propagation属性配置</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-05-18T11:25:34+08:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:25 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>应用场景</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;tx:advice id="txadvice" transaction-manager="transactionManager"&gt;
</span><span class='line'>    &lt;tx:attributes&gt;
</span><span class='line'>        &lt;tx:method name="*" propagation="REQUIRED"/&gt;
</span><span class='line'>    &lt;/tx:attributes&gt;
</span><span class='line'>&lt;/tx:advice&gt;</span></code></pre></td></tr></table></div></figure>


<p>其中，<code>propagation</code>的属性值有<code>REQUIRED</code>、<code>SUPPORTS</code>、<code>MANDATORY</code>、<code>REQUIRES_NEW</code>、<code>NOT_SUPPORTED</code>、<code>NEVER</code>、<code>NESTED</code>等7种，默认是<code>REQUIRED</code>。<br/>
1. <code>REQUIRED</code>:如果存在一个事务，则支持当前事务;如果没有事务则开启。<br/>
2. <code>SUPPORTS</code>:如果存在一个事务，支持当前事务;如果没有事务，则非事务的执行。<br/>
3. <code>MANDATORY</code>:如果已经存在一个事务，支持当前事务;如果没有一个活动的事务，则抛出异常。<br/>
4. <code>REQUIRES_NEW</code>:总是开启一个新的事务;如果一个事务存在，则将这个存在的事务挂起。<br/>
5. <code>NOT_SUPPORTED</code>:总是非事务地执行;并挂起任何存在的事务。<br/>
6. <code>NEVER</code>:总是非事务地执行，如果存在一个活动事务，则抛出异常。<br/>
7. <code>NESTED</code>:如果一个活动的事务存在，则运行在一个嵌套的事务中，如果没有活动事务，则按<code>REQUIRED</code>属性执行。</p>

<h2>解决嵌套事务异常的问题</h2>

<h3>源代码</h3>

<p>DataSyncManager.java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataSyncManager</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">syncData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">syncData</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">syncData</span><span class="o">(</span><span class="n">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//递归同步</span>
</span><span class='line'>    <span class="c1">//syncData(code)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>applicationContext.xml:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;tx:advice</span> <span class="na">id=</span><span class="s">&quot;txadvice&quot;</span> <span class="na">transaction-manager=</span><span class="s">&quot;transactionManager&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tx:attributes&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&quot;*&quot;</span> <span class="na">propagation=</span><span class="s">&quot;REQUIRED&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&quot;sync*&quot;</span> <span class="na">propagation=</span><span class="s">&quot;REQUIRED&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tx:attributes&gt;</span>
</span><span class='line'><span class="nt">&lt;/tx:advice&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>异常信息</h3>

<p>每次数据同步完成之后就会爆出错误，然后事务回滚，同步失败。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>ERROR [org.quarz.core.ErrorLogger 2185] - <span class="nt">&lt;Job</span> <span class="err">&lt;DEFAULT.syncDataListenerJobThrew</span> <span class="err">an</span> <span class="err">exception.</span><span class="nt">&gt;</span>
</span><span class='line'>org.springframework.scheduling.quartz.JobMethodInvocationFailedException: Invocation of method &#39;syncData&#39; on target class [class com.text.db.manager.DataSyncManager$$EnhancerByCGLIB$$b012b05e] failed; nested exception is org.springframework.transaction.UnexceptedRollbackException: Transaction rolled back because it has been marked as rollback-only
</span><span class='line'>...
</span><span class='line'>&gt;
</span></code></pre></td></tr></table></div></figure>


<h3>问题分析</h3>

<p>根据原有配置，执行syncData()方法会创建事务，随后执行syncData(code)方法，以及递归方法都会支持当前事务，从而形成一个庞大的事务，在同步多天历史数据的情况下，很不可取，一旦出了问题，所有数据都会回滚。</p>

<h3>解决办法</h3>

<p>将事务进行拆分，一旦某阶段的数据同步成功，就提交事务，下一阶段的数据同步重新创建事务。<br/>
DataSyncManager.java</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataSyncManager</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">initSyncData</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">syncData</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">syncData</span><span class="o">(</span><span class="n">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//递归同步</span>
</span><span class='line'>    <span class="c1">//syncData(code)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>applicationContext.xml:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;tx:advice</span> <span class="na">id=</span><span class="s">&quot;txadvice&quot;</span> <span class="na">transaction-manager=</span><span class="s">&quot;transactionManager&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tx:attributes&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&quot;syncData&quot;</span> <span class="na">propagation=</span><span class="s">&quot;REQUIRES_NEW&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tx:method</span> <span class="na">name=</span><span class="s">&quot;*&quot;</span> <span class="na">propagation=</span><span class="s">&quot;SUPPORTS&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tx:attributes&gt;</span>
</span><span class='line'><span class="nt">&lt;/tx:advice&gt;</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/05/26/modify-the-system-users-password-in-oracle-11g/">重置oracle 11g中sys用户的密码</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/26/eclipse-tips/">Eclipse技巧</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/25/liferay-internationalization/">Liferay 国际化</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/25/liferay-portlet-lifecycle/">Liferay Portlet 生命周期</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/05/24/oracle-command/">Oracle常用运维命令</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - 范琪 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
